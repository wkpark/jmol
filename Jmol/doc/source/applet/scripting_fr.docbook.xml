<!--
  French translation 
  Translated from default version : scripting.docbook.xml (v 1.4)
-->
<chapter>
  <title>Commandes de Script</title>
  <para>
    Les commandes de script sont les m&ecirc;mes avec l'Applet Jmol qu'avec
    l'application Jmol. Toutefois, avec l'applet vous n'avez pas le retour de
    la fran&ecirc;tre de commande de script.
  </para>
  <section>
    <title>R&eacute;f&eacute;rence des Scripts</title>
    <para>
      Jmol impl&eacute;mente presque toutes les commandes de script qui
      existent dans l'outil de visualisation mol&eacute;culaire RasMol.
      Actuellement, la r&eacute;f&eacute;rence principale du langage de script
      est la documentation RasMol. Elle peut &ecirc;tre trouv&eacute;e sur le
      web &agrave;
      <ulink url="http://www.openrasmol.org/doc/">
        http://www.openrasmol.org/doc/
      </ulink>
    </para>
    <para>
      <emphasis>Si vous n'&ecirc;tes pas familier avec la langage de script de
      RasMol, nous vous conseillons </emphasis>fortement<emphasis> de devenir
      familier avec ce document.</emphasis>
    </para>
    <para>
      MDA a &eacute;tendu le langage de script RasMal pour l'utiliser dans
      leur plugin Chime. Jmol impl&eacute;mente certaines de ces extensions du
      langage de script. Pour plus ample information sur les extensions de
      Chime et Chime/Rasmol, se reporter &agrave;
      <ulink url="http://www.mdlchime.com/chime/">
        http://www.mdlchime.com/chime/
      </ulink>
    </para>
    <para>
      Dans certains domaines, Jmol a &eacute;tendu ces commandes RasMol/Chime
      pour offrir des fonctions suppl&eacute;mentairees. La documentation
      d&eacute;taill&eacute;e n'a pas encore &eacute;t&eacute;
      r&eacute;dig&eacute;e :-(
    </para>
  </section>
  <section>
    <title>Mani&egrave;res d'int&eacute;grer des scripts</title>
    <para>
      Il y a deux mani&egrave;res de d&eacute;finir un script qui doit
      &ecirc;tre lanc&eacute; par l'applet.
    </para>
    <itemizedlist>
      <listitem><para>
        en utilisant le tag parameter="script" comme partie de la
        sp&eacute;cification de l'applet
      </para></listitem>
      <listitem><para>
          en utilisant la m&eacute;thode JavaScript script('script-commands')
      </para></listitem>
    </itemizedlist>
    <para>Dans l'un ou l'autre cas vous pouvez</para>
    <itemizedlist>
      <listitem><para>
        inclure le script entier dans la page html
      </para></listitem>
      <listitem><para>
        utiliser la commande <command>script [scriptname]</command> pour
        charger un script depuis le serveur web
      </para></listitem>
    </itemizedlist>
    <para>
      En g&eacute;n&eacute;ral, la premi&egrave;re de ces mani&egrave;res
      n'est acceptable que pour les petits scripts.
      Pour des scripts plus longs, il est probablement pr&eacute;f&eacute;rable
      de stocker les fichiers de script sur le serveur et de les lancer
      indirectement avec la commande 'script'.
    </para>
  </section>
  <section>
    <title>Exemples</title>
    <para>
      Tous les exemples suivant chargent la mol&eacute;le caffeine.xyz.
      Les exemples supposent aussi que le fichier JmolApplet.jar est
      situ&eacute; dans le m&ecirc;me r&eacute;pertoire que la page .html.
      Diff&eacute;rentes mani&egrave;res d'invoquer les scripts sont
      d&eacute;crites.
    </para>
    <para>
      Un petit script inclus en tant que param&egrave;tre de l'applet qui est
      ex&eacute;cut&eacute; d&egrave;s que l'applet est charg&eacute;e.
      <programlisting><![CDATA[
        <html>
          <head><title>Example 1</title></head>
          <body>
            <applet name="jmol" code="JmolApplet" archive="JmolApplet.jar"
              width="350" height="350">
              <param name="progressbar"   value="true" />
              <param name="progresscolor" value="blue" />
              <param name="boxmessage"    value="Loading Jmol ..." />
              <param name="boxbgcolor"    value="black" />
              <param name="boxfgcolor"    value="white" />  
              <param name="load"          value="caffeine.xyz" />
              <param name="script"        value="rotate x 90 ; background yellow">
            </applet>
          </body>
        </html>
        ]]>
      </programlisting>
    </para>
    <para>
      Dans cet exemple, la commande <command>script</command> est
      utilis&eacute;e pour ex&eacute;cuter un script plus long qui est
      stock&eacute; dans le sous-r&eacute;pertoire scripts sur le serveur web.
      <programlisting><![CDATA[
        <html>
          <head><title>Example 2</title></head>
          <body>
            <applet name="jmol" code="JmolApplet" archive="JmolApplet.jar"
              width="350" height="350">
              <param name="progressbar"   value="true" />
              <param name="progresscolor" value="blue" />
              <param name="boxmessage"    value="Loading Jmol ..." />
              <param name="boxbgcolor"    value="black" />
              <param name="boxfgcolor"    value="white" />  
              <param name="load"          value="caffeine.xyz" />
              <param name="script"        value="script scripts/myLongScript.txt">
            </applet>
          </body>
        </html>
        ]]>
      </programlisting>
    </para>
    <para>
      Cet exemple utilise <command>onLoad</command> pour ex&eacute;cuter
      JavaScript qui, &agrave; son tour, dirige l'applet.
      <programlisting><![CDATA[
        <html>
          <head><title>Example 3</title></head>
          <body onLoad="document.jmol.script('select carbon; color green')">
            <applet name="jmol" code="JmolApplet" archive="JmolApplet.jar"
              width="350" height="350">
              <param name="progressbar"   value="true" />
              <param name="progresscolor" value="blue" />
              <param name="boxmessage"    value="Loading Jmol ..." />
              <param name="boxbgcolor"    value="black" />
              <param name="boxfgcolor"    value="white" />  
              <param name="load"          value="caffeine.xyz">
            </applet>
          </body>
        </html>
        ]]>
      </programlisting>
    </para>
    <para>
      Essentiellement la m&ecirc;me chose, mais en chargant un script depuis
      le serveur web.
      <programlisting><![CDATA[
        <html>
          <title>Example 4</title>
          <body onLoad="document.jmol.script('script scripts/myLongScript.txt')">
            <applet name="jmol" code="JmolApplet" archive="JmolApplet.jar"
              width="350" height="350">
              <param name="progressbar"   value="true" />
              <param name="progresscolor" value="blue" />
              <param name="boxmessage"    value="Loading Jmol ..." />
              <param name="boxbgcolor"    value="black" />
              <param name="boxfgcolor"    value="white" />  
              <param name="load"          value="caffeine.xyz">
            </applet>
          </body>
        </html>
        ]]>
      </programlisting>
    </para>
    <para>
      En appelant une fonction javascript qui contr&ocirc;le le script.
      <programlisting><![CDATA[
        <html>
          <title>Example 5</title>
          <script>
            function runMyScript() {
              document.jmol.script('move 0 0 360 0 0 0 0 0 4');
            }
          </script>
          <body onLoad="runMyScript()">
            <applet name="jmol" code="JmolApplet" archive="JmolApplet.jar"
              width="350" height="350">
              <param name="progressbar"   value="true" />
              <param name="progresscolor" value="blue" />
              <param name="boxmessage"    value="Loading Jmol ..." />
              <param name="boxbgcolor"    value="black" />
              <param name="boxfgcolor"    value="white" />  
              <param name="load"          value="caffeine.xyz">
            </applet>
          </body>
        </html>
        ]]>
      </programlisting>
    </para>
    <para>
      En utilisant des boutons pour appeler des m&eacute;thodes javascript,
      chacune ex&eacute;cutant un script jmol.
      <programlisting><![CDATA[
        <html>
          <title>Example 6</title>
          <script>
            function rotateX() {
              document.jmol.script('move 360 0 0 0 0 0 0 0 4');
            }
            function rotateY() {
              document.jmol.script('move 0 360 0 0 0 0 0 0 4');
            }
            function rotateZ() {
              document.jmol.script('move 0 0 360 0 0 0 0 0 4');
            }
          </script>
          <body>
            <applet name="jmol" code="JmolApplet" archive="JmolApplet.jar"
              width="350" height="350">
              <param name="progressbar"   value="true" />
              <param name="progresscolor" value="blue" />
              <param name="boxmessage"    value="Loading Jmol ..." />
              <param name="boxbgcolor"    value="black" />
              <param name="boxfgcolor"    value="white" />  
              <param name="load"          value="caffeine.xyz">
            </applet>
            <form>
              <input type="button" value="rotate x" onClick="rotateX()"/>
              <input type="button" value="rotate y" onClick="rotateY()"/>
              <input type="button" value="rotate z" onClick="rotateZ()"/>
            </form>
          </body>
        </html>
        ]]>
      </programlisting>
    </para>
    <para>
      En utilisant des boutons qui appellent des m&eacute;thodes javascript,
      chacune pilotant un script d'animation jmol
      <programlisting><![CDATA[
        <html>
          <title>Example 7</title>
          <script>
            function play(script) {
              document.jmol.script(script);
            }
          </script>
          <body>
            <applet name="jmol" code="JmolApplet" archive="JmolApplet.jar"
              width="350" height="350">
              <param name="progressbar"   value="true" />
              <param name="progresscolor" value="blue" />
              <param name="boxmessage"    value="Loading Jmol ..." />
              <param name="boxbgcolor"    value="black" />
              <param name="boxfgcolor"    value="white" />  
              <param name="load"          value="models/SN1_reaction.xyz">
            </applet>
            <form>
              <input type="button" value="next"
                onClick="play('animate next')">
              <input type="button" value="prev"
                onClick="play('animate prev')">
              <input type="button" value="rewind"
                onClick="play('animate rewind')">
              <input type="button" value="play"
                onClick="play('animate play')">
              <input type="button" value="revplay"
                onClick="play('animate revplay')">
              <br>
                <input type="button" value="repeated with 2 second delay"
                  onClick="play('animate play; loop 2')">
              <br>
                <input type="button" value="repeated no delay"
                  onClick="play('animate play; loop 0')">
              <br>
                <input type="button" value="forward and reverse"
                  onClick="play('animate play; animate revplay; loop 0')">
            </form>
          </body>
        </html>
        ]]>
      </programlisting>
    </para>
  </section>
</chapter>
