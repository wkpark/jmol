<?xml version="1.0"?>
<!DOCTYPE book PUBLIC "-//OASIS//DTD DocBook XML V4.1.2//EN" "http://www.oasis-open.org/docbook/xml/4.0/docbookx.dtd">
<book>
  <bookinfo>
    <title>Jmol Documentation</title>
  </bookinfo>
  
  <chapter id="intro">
    <title>Introduction</title>
    <para>
      Jmol is far more than just a Java based tool for 
      displaying 3D chemical information.
    </para>
  </chapter>

  <chapter id="commandlineoptions">
    <title>Command Line Options</title>
    <para>
      The program jmol has a command line option to run scripts:
      <cmdsynopsis><arg>-script</arg></cmdsynopsis>. The current syntax is:
      <cmdsynopsis>
        <command>jmol</command>
        <arg>-script <arg choice="req"><replaceable>rasmol.script</replaceable></arg></arg>
      </cmdsynopsis>
      This makes it possible to start jmol with a Rasmol script.
      The syntax of these scripts is explained in <link linkend="rasmol" endterm="rasmol.title" />.
    </para>
    <para>
      Alternatively, jmol can be started with one argument, being a file name:
      <cmdsynopsis>
        <command>jmol</command>
        <arg choice="req"><replaceable>file</replaceable></arg>
      </cmdsynopsis>
    </para>
    <section>
      <title>Java Options</title>
      <section>
        <title>-Duser.language</title>
        <para>
	  In addition to the above command line options there is also one
	  important Java option: <cmdsynopsis><arg>-Duser.language</arg></cmdsynopsis>.
	  With this option the GUI language can be set. At this moment
	  these languages are supported: <literal>en</literal>, <literal>es</literal>, and <literal>nl</literal>.
	</para>
	<para>
	  Alternatively, you can also use the <envar>LANG</envar> environment
	  variable for setting the prefered language. This is common in many
	  UNIX systems, like Linux. However, it is known not to work on
	  Solaris and the above command line option must be used.
	</para>
      </section>
      <section>
        <title>-Ddisplay.speed</title>
        <para>
          The <cmdsynopsis><arg>-Ddisplay.speed=fps</arg></cmdsynopsis> option can be used
          to reporting the display speed in <emphasis>frames per second</emphasis> instead
          of milliseconds per frame.
        </para>
      </section>
    </section>
  </chapter>

  <chapter id="menudesc">
    <title>Menu description</title>
    <section>
      <title>The File menu</title>
      <section>
        <title>Open</title>
        <para>
          Open files in Jmol. Jmol can read files of the following types:
          <itemizedlist>
            <listitem><para><ulink url="http://www.abinit.org/">ABINIT</ulink></para></listitem>
            <listitem><para>ACES II</para></listitem>
            <listitem><para>ADF - Amsterdam Density Functional</para></listitem>
            <listitem><para><ulink url="http://www.xml-cml.org/">CML v1.0 and 1.0.1</ulink></para></listitem>
            <listitem><para>GAMESS</para></listitem>
            <listitem><para>Gaussian 92/94/98</para></listitem>
            <listitem><para>Ghemical MM</para></listitem>
            <listitem><para>Jaguar</para></listitem>
            <listitem><para>MDL molfile</para></listitem>
            <listitem><para>PDB (ATOM and HETATM entries only)</para></listitem>
            <listitem><para>XYZ (single and multiple frame)</para></listitem>
          </itemizedlist>
        </para>
      </section>
      <section>
        <title>Recent Files...</title>
        <para>
          Brings up a dialog with a list of the
          files the program has been asked to
          open recently. The file can be opened
          again by selecting it and clicking the
          Open button.
        </para>
      </section>
      <section>
        <title>Script...</title>
        <para>
          Opens a window where Rasmol scripting commands can be executed.
	  <xref linkend="rasmol" />
	  contains information about RasMol/Chime Scripts.
        </para>
      </section>
      <section>
        <title>Save As...</title>
        <para> </para>
      </section>
      <section>
        <title>Export</title>

        <section>
          <title>Export -&gt; Export Image...</title>
          <para>
            Jmol can export images of the following types:
            <itemizedlist>
              <listitem><para>BMP</para></listitem>
              <listitem><para>GIF</para></listitem>
              <listitem><para>JPG</para></listitem>
              <listitem><para>PNG</para></listitem>
              <listitem><para>PPM</para></listitem>
            </itemizedlist>
          </para>
          <para>
            Note that GIF pictures can only be exported if the
            displayed image is 8 bit.
          </para>
        </section>

        <section>
          <title>Export -&gt; Render in pov-ray...</title>
          <para>
          For high quality images, Jmol interfaces with the POV-Ray ray tracer.
          To use this feature, you must have the <command>povray</command> command
          line utility installed. You can download it from
          <ulink url="http://www.povray.org/">www.povray.org/</ulink>.
          </para>
        </section>
      </section>
      <section>
        <title>Print</title>
        <para> 
          Postscript files can be exported directly to printer and to file.
        </para>
      </section>
      <section>
        <title>Exit</title>
        <para>Quits this Jmol session.</para>
      </section>
    </section>
    <section>
      <title>The Edit menu</title>
      <section>
        <title>Select All</title>
        <para>
          Selects all atoms in the view screen.
        </para>
      </section>
      <section>
        <title>Deselect All</title>
        <para> 
          Deselects all atoms in the view screen.
        </para>
      </section>
      <section>
        <title>Atom Properties...</title>
        <para> 
          This menu opens a dialog in which atomic properties can be added to
          a large number of atom types. These properties include
          the colors used to depict atoms.
        </para>
      </section>
      <section>
        <title>Preferences...</title>
        <para>
          This menu opens a dialog to change settings and make user customized
          preferences. These settings are saved from one session to the next
        </para>
        <section>
          <title>Display Tab</title>
          <para>
            In these frame a few display settings can be changed. By default
            anti-aliasing is turned off. Turning it on improves the images
	    considerably but will also reduce performance.
          </para>
          <para>
	    Note: The 1.3.1 JVM which ships with Macintosh OS X and OS X 10.2
	    (Jaguar) has crash bugs with some pixel interpolation and
	    anti-aliasing operations. Therefore, you may need to disable the
	    use of Java Graphics2D on this platform. 
          </para>
        </section>
        <section>
          <title>Colors Tab</title>
          <para>
            In these frame some general display colors can be changed.
            Like the background color, and the color used to highlight
	    selected atoms.
          </para>
        </section>
      </section>
    </section>
    <section>
      <title>The Display menu</title>
      <para>
        In this menu display settings/styles can be changed.
      </para>
      <section>
        <title>Atom Style</title>
        <section>
          <title>Quick Draw</title>
	  <para>
	    Renders atoms as filled circles.
          </para>
        </section>
        <section>
          <title>Shaded</title>
          <para>
	    Renders atoms as shaded spheres.
          </para>
        </section>
        <section>
          <title>Wire Frame</title>	  
          <para>
	    Renders atoms as circle outlines.
	  </para>
        </section>
	<section>
	  <title>Invisible</title>
	  <para>
	    Atoms are not drawn, but are assumed to have the same radius that
	    they would occupy. So bonds are drawn to the outer circumference
	    of where the atom would be. Compare with *None*
	  </para>
	  <para>
	    This option can be useful when used in conjunction with 
	    atom labels to display atom type.
	  </para>
	</section>
	<section>
	  <title>None</title>
	  <para>
	    Atoms are not drawn and are assumed to have a radius of zero.
	    Bonds are drawn to atom centers. 
	  </para>
	  <para>
	    This option can be very useful when use in conjunction with 
	    atom labels to display atom type.
	  </para>
	</section>
      </section>
      <section>
        <title>Bond Style</title>
        <section>
          <title>Quick Draw</title>	  
	  <para>
	    Renders bonds as filled rectangles.
	  </para>
        </section>
        <section>
          <title>Shaded</title>	  
	  <para>
	    Renders bonds as shaded cylinders.
	  </para>
        </section>
        <section>
          <title>Wire Frame</title>
	  <para>
	    Renders bonds as lines.
	  </para>
        </section>
        <section>
          <title>Boxes</title>
	  <para>
	    Renders bonds as rectangle outlines.
	  </para>
        </section>
        <section>
          <title>None</title>
	  <para>
	    Bonds are not drawn. 
	  </para>
        </section>
      </section>
      <section>
        <title>Atom Labels</title>
        <section>
          <title>None</title>	  
          <para>
            No atom labels is shown.
          </para>
        </section>
        <section>
          <title>Atomic Symbols</title>	  
          <para>
            Atoms are labeled with their atomic symbol.
          </para>
        </section>
        <section>
          <title>Atom Types</title>
          <para>
            Atoms are labeled with their atom type.
	    (What is the difference between Atom Type and Atom Symbol?)
          </para>
        </section>
        <section>
          <title>Atom Numbers</title>
	  <para>
	    Atoms are labeled with index numbers.
	  </para>
        </section>
      </section>
      <section>
	<title>Atom Coloring</title>
	<section>
	  <title>Atom Type</title>
	  <para>
	    Atoms are colored based upon their type. Default colors are
	    generally CPK colors
	  </para>
	</section>
	<section>
	  <title>Atomic Charge</title>
	  <para>
	    Atoms are colored based upon atomic charge. (Need more
	    explanation here!)
	  </para>
	</section>
      </section>
      <section>
        <title>Wireframe Rotation</title>
	<para>
	  This option may be checked if performance is unacceptable when
	  manipulating large molecules. 
	  When this option is checked, wireframe rendering is used for
	  displayed atoms and bonds during rotations, translations, and
	  zoom operations. The molecule is rendered according to the current
	  settings when the mouse is released.
	</para>
      </section>
      <section>
	<title>Perspective Depth</title>
	<para>
	  This option controls rendering with perspective depth. When this
	  option is unchecked molecules are rendered as a flat projection
	  onto the screen. When checked, sizes and distances are adjusted
	  for a camara perspective.
	</para>
	<para>
	  For a good example of this take a look at some of the crystal
	  structures, such as <filename>samples/CdSe_nanocrystal.xyz</filename>
	  or <filename>samples/HfO2_on_Si_relax.in</filename>
	</para>
	<para>
	  Alternatively, turn on the bounding box (see below).
	</para>
      </section>
      <section>
	<title>Axes</title>
	<para>
	  Displays cartesian axes with the origin at the center of the
	  bounding box defined by the extreme coordinates of the molecule.
	</para>
	<para>
	  Note that the positive Y axis is at the top, unlike RasMol.
	</para>
      </section>
      <section>
	<title>Bounding Box</title>
	<para>
	  Displays the bounding box, defined by the extreme coordinates
	  of the centers of the atoms in each of the three dimensions.
	</para>
      </section>
      <section>
        <title>Hydrogens</title>
        <para> 
          Turns on/off the display of hydrogen atoms.
        </para>
      </section>
      <section>
        <title>Vectors</title>
        <para>
	  Controls the display of vibrational vectors as dipole moments.
	</para>
      </section>
      <section>
        <title>Measurements</title>
        <para>
	  Controls the display of distance, angle, and dihedral torsion
	  measurements. 
	</para>
      </section>
    </section>
    <section>
      <title>The View menu</title>
      <section>
	<title>Front/Top/Bottom/Right/Left</title>
	<para>
	  Self explanatory. Useful with crystal structures. 
	</para>
      </section>
      <section>
        <title>Transform</title>
	<para>
	  Applies an AxisAngle rotation about user-specified coordinates.
	</para>
      </section>
      <section>
        <title>Define center</title>
	<para>
	  Defines the center of rotation for the molecule to be the
	  geometric center of the selected molecules.
	</para>
	<para>
	  If no atoms are selected the the center is reset to the center
	  of the bounding box defined by the extreme atom centerpoints
	  in each of the x, y, and z dimensions. This is the default.
	</para>
	<para>
	  If one atom is selected then it becomes the center of rotation.
	</para>
	<para>
	  If two or more atoms are selected then the center becomes the point
	  defined by the mean of the x, y, and z coordinates.
	</para>
	<para>
	  {If you think there is a better definition for this
	  (center of gravity? center of the bounding box?)
	  then let us know and we can either change this or add a
	  new definition.}
	</para>
      </section>
    </section>
    <section>
      <title>The Measure menu</title>
      <section>
        <title>Distance...</title>
	<para>
	  Allows you to choose two atoms and display the distance between them.
	</para>
      </section>
      <section>
        <title>Angle...</title>
	<para>
	  Allows you to choose three atoms and display the angle formed about
	  the center atom.
	</para>
      </section>
      <section>
        <title>Dihedral...</title>
	<para>
	  Allows you to choose four atoms and display the Dihedral/Torsion
	  angle between the two planes defined by atoms 1,2,3 and atoms 2,3,4.
	</para>
      </section>
      <section>
	<title>Delete Distance/Angle/Dihedral</title>
	<para>
	  Allows you to delete one or more distance/angle/dihedral
	  measurements.
	</para>
      </section>
      <section>
	<title>Clear all Distances/Angles/Dihedrals</title>
	<para>
	  Self explanatory.
	</para>
      </section>
      <section>
        <title>Clear all Measurements...</title>
	<para>
	  Self explanatory.
	</para>
      </section>
      <section>
        <title>View Measurement List...</title>
	<para>
	  Displays a hierarchical list of all defined measurements.
	</para>
      </section>
    </section>
    <section>
      <title>The Extras menu</title>
      <section>
        <title>Animate...</title>
	<para>
	  Some file formats support multiple frames. A file containing more
	  than one frame is considered an animation. This menu item brings
	  up the animation dialog box which allows you to control the
	  animation playback. 
	</para>
      </section>
      <section>
        <title>Vibrate...</title>
	<para>
	  If the molecular model contains frequency information, the
	  vibrational modes can be animated and controlled with the
	  vibrate dialog box. 
	</para>
	<para>
	  Note that Display->Vectors should be checked in order to render
	  vibrational vectors. 
	</para>
	<para>
	  Good examples are <filename>samples/phenylnitrene.g92.out</filename>
	  and <filename>samples/ammonia.adf.out</filename>
	</para>
      </section>
      <section>
        <title>Graph...</title>
        <para>This opens a window in which a energy versus frames plot
          is viewed. This option currently only works when reading a
          CML animation with energies given for each frame.</para>
        <para>An example file is supplied: conformeren.cml.</para>
      </section>
      <section>
        <title>Crystal Properties...</title>
        <para>
	  Opens the crystal properties dialog box. 
	</para>
      </section>
    </section>
    <section>
      <title>The Help menu</title>
      <section>
        <title>About Jmol</title>
        <para>Popups a window with copyright notice for this software.</para>
      </section>
      <section>
        <title>User Guide</title>
	<para>Shows this documentation.</para>
      </section>
      <section>
        <title>What's New</title>
        <para>Shows the changes from version to version.</para>
      </section>
      <section>
        <title>Jmol Console</title>
        <para>
	  Shows the output to the System.out and System.err output streams.
	</para>
      </section>
    </section>
  </chapter>

  <chapter id="rasmol" xreflabel="RasMol/Chime Scripts">
    <title id="rasmol.title">RasMol/Chime Scripts</title>
    <para>
      Note: The scripting engine has been completely rewritten for Jmol Release
      6. As of this writing it should be considered *alpha test* code. Please
      supply feedback in case of bugs and/or unexpected behavior. 
    </para>
    <para>
      Jmol currently supports many (most?) of RasMol/Chime scripting commands. 
    </para>
    <para>
      Most movement, selection, atom expression and color commands are
      operational.
    </para>
    <para>
      Things that explicitly do *not* work are protein rendering formats such
      as ribbons, cartoons, strands, etc. Jmol does not perform lighting
      and surface rendering on the fly, so settings such as ambient, shadows,
      specular and specpower are not available. Finally, Jmol does not have
      a true 3D graphics engine, so renderings of intersecting surfaces
      are not handled properly. This occurs when Atoms are rendered with
      larger vanderWaals percentages (such as 50% or more).
    </para>
    <para>
      Please give us feedback on what features you would like. This will help
      us prioritize future development.
    </para>
    <section>
      <title>RasMol/Chime commands</title>
      <section>
	<title>background &lt;color&gt;</title>
	<para>
	  Sets color of the background. See Color Specification.
	</para>
      </section>
      <section>
	<title>center {&lt;expression&gt;}</title>
	<para>
	  Sets the center of rotation to be the center of the set of atoms
	  defined by the expression. 
	  This is calculated as the mean value of the coordinates of the
	  selected atoms along each of the respective axes.
	  If no atoms are selected then the center
	  is set to the center of the bounding box (the default).
	</para>
      </section>
      <section>
	<title>Color {&lt;object&gt;} &lt;color&gt;</title>
	<para>
	  Colors the object with the specified color. If no object is given
	  then atom is assumed. Currently supported objects are atoms, bonds,
	  labels and axes.
	</para>
      </section>
      <section>
	<title>cpk &lt;boolean&gt; | cpk &lt;value&gt;</title>
	<para>
	  Renders selected atoms as shaded spheres.
	</para>
	<para>
	  A boolean value renders the spheres with the vanderWaals radius.
	  The current jmol implementation does a poor job of rendering
	  these because the renderer does nothandle intersecting objects. 
	</para>
	<para>
	  A decimal value specifies sphere radius in Angstroms.
	</para>
	<para>
	  A positive integer specifies sphere radius in RasMol units,
	  1/250th of an Angstrom.
	</para>
	<para>
	  Jmol extension: 
	  A negative integer specifies sphere radius as a percentage of
	  the vanderWaals radius. Thus, a value of -25 specifies that the
	  selected atoms should be rendered with a sphere radius of 25%
	  of the vanderWaals radius for that element.
	</para>
	<para>
	  cpk is synonymous with spacefill.
	</para>
      </section>
      <section>
	<title>define &lt;variable&gt; &lt;expression&gt;</title>
	<para>
	  defines the specified variable to the the atoms selected by
	  the expression;
	</para>
      </section>
      <section>
	<title>echo &lt;string&gt;</title>
	<para>
	  Prints the specified string to the console. (We need to find a
	  better place to send the output. Status line?)
	</para>
      </section>
      <section>
	<title>exit</title>
	<para>
	  Stops execution of the current script. In the case of a script
	  which is being run as a child script, execution continues with
	  the parent.
	</para>
	<para>
	  For programmers, this is a 'return' statement.
	</para>
      </section>
      <section>
	<title>label &lt;boolean&gt; | label &lt;string&gt;</title>
	<para>
	  Allows you to specify a label to be shown with the selected atoms.
	  %a  Atom Name
	  %b %t Protein B-Factor/Temperature
	  %c %s Protein chain
	  %e Element atomic symbol
	  %i Atom serial number
	  %m single letter amino acid code
	  %n 3 letter residue name
	  %r PDB residue number
	</para>
      </section>
      <section>
	<title>load {&lt;format&gt;} &lt;filename | url&gt;</title>
	<para>
	  Loads the specified file or URL. 
	</para>
	<para>
	  Jmol automatically determines file type based upon the contents
	  of the file. Therefore, the format parameter is ignored.
	  It is allowed for backward compatibility with RasMol/Chime.
	</para>
      </section>
      <section>
	<title>monitor &lt;number&gt; &lt;number&gt; {&lt;number&gt;} {&lt;number&gt;}</title>
	<para>
	  Renders a measurement between the specified atoms.
	</para>
	<para>
	  Two atoms specify a distance measurement.
	</para>
	<para>
	  Jmol extension: Three atoms specify an angle measurement.
	</para>
	<para>
	  Jmol extension: Four atoms specify a dihedral angle measurement.
	</para>
      </section>
      <section>
	<title>quit</title>
	<para>
	  In the current release of Jmol, quit is synonymous with exit.
	</para>
	<para>
	  This is inconsistent with RasMol, where quit means to exit
	  the program. 
	</para>
      </section>
      <section>
	<title>refresh</title>
	<para>
	  Forces screen repaint during script execution.
	  (Frankly, I am not sure under what circumstances this would be
	  necessary?)
	</para>
      </section>
      <section>
	<title>reset</title>
	<para>
	  Resets molecule to its original position: zoom 100; center; 
	  translate x 0; translate y 0;
	</para>
      </section>
      <section>
	<title>restrict &lt;expression&gt;</title>
	<para>
	  Selects the atoms identified by expression and hides all atoms
	  and bonds which are outside the selection set.
	</para>
      </section>
      <section>
	<title>rotate &lt;axis&gt; &lt;value&gt;</title>
	<para>
	  Rotates the model the specified angle about the specified axis.
	  Integer values specify degrees. Decimal values specify radians.
	</para>
      </section>
      <section>
	<title>script &lt;filename | url&gt;</title>
	<para>
	  Loads and executes the specified script file/url. The
	  hash/pound/sharp character (#) character marks a comment to the
	  end of the line. The semicolon character (;) separates multiple
	  statements on the same line. A script file may load another script
	  file, up to 10 deep.
	</para>
	<para>
	  The command *source* is a synonym for *script*.
	</para>
      </section>
      <section>
	<title>select {&lt;expression%gt;}</title>
	<para>
	  Selects the atoms identified by the expression. 
	</para>
	<para>
	  If no expression is given then all atoms are selected.
	</para>
	<para>
	  Note that RasMol does not hilite selections. To see the selected
	  atoms use the command 'set display selected'
	</para>
	<para>
	  (This is a problem area for Jmol. If you have suggestions on how
	  this can be improved please let us know.)
	</para>
      </section>
      <section>
	<title>set &lt;parameter%gt; {&lt;value&gt;}</title>
	<para>
	  See separate section for set parameters.
	</para>
      </section>
      <section>
	<title>slab &lt;boolean&gt; | &lt;percentage&gt;</title>
	<para>
	  Slab mode provides a z-clipping plane that allows you to specify
	  the percentage of the molecule to be displayed. 
	</para>
	<para>
	  A boolean parameter turns slabbing on or off.
	</para>
	<para>
	  A percentage from 0 to 100 controls the amount of the molecult
	  to be shown. A value of 0 shows nothing. A value of 100 shows
	  everything. A value of 50 shows the back 50% of the molecule. A
	  value of 25 shows the back quarte of the molecule.
	</para>
	<para>
	  (I have never seen the term slab used in this way before. As far
	  as I know, the term is only used in RasMol.)
	</para>
      </section>
      <section>
	<title>spacefill {&lt;boolean&gt;} | &lt;value&gt;</title>
	<para>
	  see cpk
	</para>
      </section>
      <section>
	<title>translate &lt;axis&gt; &lt;value&gt;</title>
	<para>
	  Moves the molecule along the specified axes according to the amount
	  specified by value. Value ranges from -100 to 100, and represents
	  the percentage of the display window.
	  Negative values move to the left (for the x axis) and down
	  (for the y axis). A value of 100 will move the
	  molecule completely out of the window. A value of 50 will move the
	  center of the molecule to the edge of the window. 
	</para>
	<para>
	  (A translation along the z axis is defined in the RasMol
	  documentation. As far as I can tell, it does nothing. If anybody
	  knows anything different, please let us know.)
	</para>
      </section>
      <section>
	<title>wireframe {&lt;boolean&gt;} | &lt;value&gt;</title>
	<para>
	  In RasMol terminology, wireframe refers to the bonds drawn between
	  the atoms. A boolean value of 'on' draws the selected bonds as
	  lines. Alternatively, a numeric value may be used to specify
	  the radius of the bonds. A decimal value specifies Angstroms.
	  An integer value specifies RasMol units (1/250th Angstrom).
	</para>
      </section>
      <section>
	<title>zap</title>
	<para>
	  Clears the currently loaded molecule.
	</para>
	<para>
	  RasMol forces you to 'zap' prior to loading a new molecule. Jmol
	  currently does not have this restriction and does not enforce it.
	</para>
      </section>
      <section>
	<title>zoom {&lt;boolean&gt;} | &lt;percentage&gt;</title>
	<para>
	  Allows you to enlarge (or shrink) the molecule.
	</para>
	<para>
	  A boolean value turns zooming on or off.
	</para>
	<para>
	  A percentage value specifies the zoom percentage. 100 is the default
	  value. The smallest acceptable value is 10. The largest acceptable
	  value is 500. (Note that these are arbitrary restrictions that
	  were put in for RasMol compatiblity. If someone wants to lift
	  these restrictions please let us know.)
	</para>
	<para>
	  The default size in Jmol is calculated so that all molecules are
	  completely visible on the screen through all rotations using the
	  default vanderWaals rendering percentage as defined in 
	  Edit->Preferences...
	</para>
      </section>
    </section>
    <section>
      <title>Set Parameters</title>
      <section>
	<title>set axes on | off</title>
	<para>
	  Controls the display of cartesians axes with origin at the
	  center of the bounding box.
	</para>
      </section>
      <section>
	<title>set background &lt;color&gt;</title>
	<para>
	  Synonymous with the background command.
	</para>
      </section>
      <section>
	<title>set bondmode and | or</title>
	<para>
	  Atom expressions are used to select atoms. The selection of bonds
	  is controled by the bondmode setting. When set to 'and', the
	  default, a bond is selected only if both atoms are selected. When
	  set to 'or' a bond is selected if either atom is selected.
	</para>
	<para>
	  You may want to select bonds in order to control their color 
	  (color bonds &lt;color&gt;) or their size (wireframe 32).
	</para>
      </section>
      <section>
	<title>set bonds on | off</title>
	<para>
	  Controls the display of double and triple bonds. When the setting
	  is off then all bonds are shown as single bonds.
	</para>
	<para>
	  Note that there are several factors which control rendering of
	  multiple bonds. 1) Whether or not the file contains bond
	  connection information. 2) whether or not Jmol calculates multiple
	  bonds 3) whether or not the bond setting is on or off (this setting)
	  4) the size of the bonds.
	</para>
	<para>
	  Item 4 needs a little more explanation. RasMol only shows multiple
	  bonds if the radius of the bonds is &lt;= 32 RasMol units
	  (32/250 = 0.128 Angstroms). Presumably this is done because
	  multiple bonds would look ugly if they were larger. 
	  Jmol currently respects this for backward compatibility with
	  existing scripts.
	</para>
      </section>
      <section>
	<title>set boundbox on | off </title>
	<para>
	  Controls rending of the bounding box which completely encloses the
	  molecule. The bounding box is defined by the minimum and maximum
	  coordinate values of the centers of the atoms along each of the
	  x, y and z axes.
	</para>
      </section>
      <section>
	<title>set display normal | selected</title>
	<para>
	  RasMol does not hilite or change colors on selected atoms. 
	  You can 'set display selected' to go to some wild color scheme.
	  Jmol implements this by using 'halos' around the selected atoms.
	  'set display normal' turns off the halos.
	</para>
	<para>
	  This is a problem area for us and we would like feedback from
	  experienced users on how this should behave. We want to maintain
	  compatibility with existing RasMol/Chime scripts,
	  but we think that the visual
	  feedback of selection halos is good during script development.
	  We also think that new/inexperienced users would benefit from
	  using the halos. Any suggestions/ideas/feedback would be appreciated.
	</para>
      </section>
      <section>
	<title>set fontsize &lt;value&gt;</title>
	<para>
	  Sets the fontsize used for atom and monitor labels.
	</para>
	<para>
	  Jmol extension: A value of 0 specifies the Jmol default size.
	  The Jmol default size is calculated as a function of the atom
	  size. So small atoms use a small font and large atoms use a 
	  large font.
	</para>
	<para>
	  This is another area where we would like user feedback on how
	  we can extend the functionality while maintaining backward
	  compatibility with existing RasMol/Chime scripts.
	</para>
      </section>
      <section>
	<title>set hetero on | off</title>
	<para>
	  Controls the default selection behavior of heterogenous atoms
	  in protein molecules in .PDB files. When turned 'on' the command
	  'select all' will include heterogenous atoms that are included
	  in the .PDB file.
	</para>
	<para>
	  See also: the predefined set 'hetero' and the
	  'set hydrogen on | off' command.
	</para>
      </section>
      <section>
	<title>set hydrogen on | off</title>
	<para>
	  Controls the default selection behavior of hydrogen atoms
	  in protein molecules in .PDB files. When turned 'on' the command
	  'select all' will include hydrogen atoms that are included
	  in the .PDB file.
	</para>
	<para>
	  See also: 'set hetero on | off' command.
	</para>
	<para>
	  (But .PDB files do not usually include hydrogen atoms?)	
	</para>
      </section>
      <section>
	<title>set monitor on | off</title>
	<para>
	  In RasMol terminology, a 'monitor' is a distance measurement.
	  These are called 'measurements' in the Jmol menus.
	  This command controls the display of the numeric labels (for
	  distance, angle, or dihedral angle). That is, with
	  'set monitor off' the lines will still be drawn, but the
	  measurement values will not be shown.
	</para>
	<para>
	  See also: monitor command
	</para>
      </section>
    </section>
    <section>
      <title>Atom Expressions</title>
      <para>
	Atom expressions are queries which specify selection criteria
	for sets of atoms. They are used as parameters to several commands,
	particularly 'select', 'restrict' and 'define'. 
      </para>
      <para>
	Most of the selection criteria are protein and .PDB file related.
	If you have used RasMol then you know what these things are. And
	all RasMol atom expressions should work. 
      </para>
      <para>
	The following are some examples using the select command:
	select all
	select *
	select elemno=1 // selects hydrogens
	select elemno=1 or elemno=6 or elemno=8 // H, C, O
      </para>
      <para>
	The following are some more complicated protein-specific expressions:
	select cys // cystines
	select cys.CA // alpha carbons in cystines
	select cys*A.CA // alpha carbons in cystines in chain A
	select 1 // all atoms in residue 1
	select 1A.C? // all carbons in residue 1 of chain a
      </para>
      <section>
	<title>boolean operators</title>
	<para>
	  Boolean operators 'and', 'or' and 'not' can be used to combine
	  sets of selected atoms. These operators can be abbreviated as
	  '&amp;', '|' and '!', respectively. 
	</para>
      </section>
      <section>
	<title>comparison operators</title>
	<para>
	  Comparisons can be made based upon a few selected atom attributes.
	  Comparisons are always of the form
	  &lt;attribute&gt; &lt;comparator&gt; &lt;value&gt;
	</para>
	<para>
	  Acceptable attributes are:
	  elemno (element number)
	  atomno (atom number)
	  radius (current spacefill radius in RasMol units)
	  temperature (protein .PDB anisotropic temperature value)
	  resno (protein .PDB residue number)
	</para>
	<para>
	  Comparators are:
	  = or ==
	  &lt;&gt; or != or /=
	  &lt;, &lt;=, &gt;=, &gt;
	</para>
      </section>
      <section>
	<title>within(&lt;distance&gt;, &lt;set&gt;)</title>
	<para>
	  The within function can be used to select all atoms that
	  are within a specified distance from any atoms in the
	  given set. Of course the he resulting set can be combined
	  using boolean operators to build more complex specifications.
	</para>
	<para>
	  If the distance contains a decimal point (dot) then the
	  number is interpreted as angstroms. If the distance is an
	  integer then the units are RasMol units.
	</para>
	<para>
	  // all atoms within 2 angstroms of a chlorine atom
	  select within(2.0, chlorine)
	  // all nitrogens more than 3 angstroms away from any carbon
	  select nitrogen &amp; !within(3.0, carbon)
	</para>
      </section>
    </section>
    <section>
      <title>Predefined Sets</title>
      <para>
	Predefined sets consist of 'all', 'none', 'selected', the element
	names, and a number of protein .PDB specific sets.
      </para>
      <para>
	'all' and 'none' should be self-explanatory. 'selected' allows you
	to use the currently selected set of atoms in a subsequent
	atom expression.
      </para>
      <para>
	Element names can be used instead of 'elemno=#'. Both singular
	and plural forms of the element names may be used. The following
	are all equivalent:
	'select hydrogen', 'select hydrogens', 'select elemno=1',
	'select elemno==1'
      </para>
      <para>
	When working with protein molecules in .PDB files you can use
	a number of predefined sets to select the atoms in amino acids
	or selected groups of amino acids.
      </para>
      <para>
	All three letter amino abbreviations work. There are also single
	letter abbreviations which work. All are compatible with RasMol.
	ala(a), arg(r), asn(n), asp(d), cys(c), glu(e), gln(q), gly(g),
	his(h), ile(i), leu(l), lys(k), met(m), phe(f), pro(p), ser(s),
	thr(t), trp(w), tyr(y), val(v)
      </para>
      <para>
	The following sets are defined as in RasMol: at, acidic, acyclic,
	aliphatic, alpha, amino, aromatic, backbone, basic, bonded,
	buried, cg, charged, cyclic, cystine, helix, hetero, hydrogen,
	hydrophobic, ions, large, ligand, medium, neutral, nucleic,
	polar, protein, purine, pyrimidine, sheet, sidechain, small,
	solvent, surface, turn, water.
      </para>
    </section>
    <section>
      <title>Rendering Commands</title>
      <section>
        <title>set shadows</title>
        <para>
	  <cmdsynopsis>
	    <command>set shadows</command>
            <group> 
	      <arg>true</arg>
	      <arg>false</arg>
	    </group>
	  </cmdsynopsis>
	</para>
        <para>
	  Turns on shading when rendering.
	</para>
      </section>
    </section>
    <section>
      <title>Export Commands</title>
      <para> </para>
    </section>
    <section>
      <title>Misc. Commands</title>
      <para> </para>
    </section>
    <section>
      <title>Colour Schemes</title>
      <para> </para>
    </section>
    <section>
      <title>Parameters</title>
      <section>
        <title>shadows</title>
        <para>
	  <cmdsynopsis>
	    <command>set shadows</command>
            <group> 
	      <arg>true</arg>
	      <arg>false</arg>
	    </group>
	  </cmdsynopsis>
	</para>
        <para>
	  Turns on shading when rendering.
	</para>
      </section>
      <section>
        <title>autorefresh</title>
        <para>
	  <cmdsynopsis>
	    <command>set refresh</command>
            <group> 
	      <arg>true</arg>
	      <arg>false</arg>
	    </group>
	  </cmdsynopsis>
	</para>
        <para>
	  Does a scripted refresh after every command. Slows
	  down the process a bit, but can be handy when entering
	  commands manually.
	</para>
      </section>
    </section>	
  </chapter>

</book>
