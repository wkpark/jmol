<?xml version="1.0"?>
<!DOCTYPE book PUBLIC "-//OASIS//DTD DocBook XML V4.1.2//EN" "http://www.oasis-open.org/docbook/xml/4.0/docbookx.dtd">
<book>
  <bookinfo>
    <title>Jmol Documentation</title>
  </bookinfo>
  
  <chapter id="intro">
    <title>Introduction</title>
    <para>
      Jmol is far more than just a Java based tool for 
      displaying 3D chemical information.
    </para>
  </chapter>

  <chapter id="commandlineoptions">
    <title>Command Line Options</title>
    <para>
      The program jmol has a command line option to run scripts:
      <cmdsynopsis><arg>-script</arg></cmdsynopsis>. The current syntax is:
      <cmdsynopsis>
        <command>jmol</command>
        <arg>-script <arg choice="req"><replaceable>rasmol.script</replaceable></arg></arg>
      </cmdsynopsis>
      This makes it possible to start jmol with a Rasmol script.
      The syntax of these scripts is explained in <link linkend="rasmol" endterm="rasmol.title" />.
    </para>
    <para>
      Alternatively, jmol can be started with one argument, being a file name:
      <cmdsynopsis>
        <command>jmol</command>
        <arg choice="req"><replaceable>file</replaceable></arg>
      </cmdsynopsis>
    </para>
    <section>
      <title>Java Options</title>
      <section>
        <title>-Duser.language</title>
        <para>
	  In addition to the above command line options there is also one
	  important Java option: <cmdsynopsis><arg>-Duser.language</arg></cmdsynopsis>.
	  With this option the GUI language can be set. At this moment
	  these languages are supported: <literal>en</literal>, <literal>es</literal>, and <literal>nl</literal>.
	</para>
	<para>
	  Alternatively, you can also use the <envar>LANG</envar> environment
	  variable for setting the prefered language. This is common in many
	  UNIX systems, like Linux. However, it is known not to work on
	  Solaris and the above command line option must be used.
	</para>
      </section>
      <section>
        <title>-Ddisplay.speed</title>
        <para>
          The <cmdsynopsis><arg>-Ddisplay.speed=fps</arg></cmdsynopsis> option can be used
          to reporting the display speed in <emphasis>frames per second</emphasis> instead
          of milliseconds per frame.
        </para>
      </section>
    </section>
  </chapter>

  <chapter id="menudesc">
    <title>Menu description</title>
    <section>
      <title>The File menu</title>
      <section>
        <title>Open</title>
        <para>
          Open files in Jmol. Jmol can read files of the following types:
          <itemizedlist>
            <listitem><para><ulink url="http://www.abinit.org/">ABINIT</ulink></para></listitem>
            <listitem><para>ACES II</para></listitem>
            <listitem><para>ADF - Amsterdam Density Functional</para></listitem>
            <listitem><para><ulink url="http://www.xml-cml.org/">CML v1.0 and 1.0.1</ulink></para></listitem>
            <listitem><para>GAMESS</para></listitem>
            <listitem><para>Gaussian 92/94/98</para></listitem>
            <listitem><para>Ghemical MM</para></listitem>
            <listitem><para>Jaguar</para></listitem>
            <listitem><para>MDL molfile</para></listitem>
            <listitem><para>PDB (ATOM and HETATM entries only)</para></listitem>
            <listitem><para>XYZ (single and multiple frame)</para></listitem>
          </itemizedlist>
        </para>
      </section>
      <section>
        <title>Recent Files...</title>
        <para>
          Brings up a dialog with a list of the
          files the program has been asked to
          open recently. The file can be opened
          again by selecting it and clicking the
          Open button.
        </para>
      </section>
      <section>
        <title>Script...</title>
        <para>
          Opens a window where Rasmol scripting commands can be executed.
          <xref linkend="rasmol" /> contains information about Rasmol Scripts.
        </para>
      </section>
      <section>
        <title>Save As...</title>
        <para> </para>
      </section>
      <section>
        <title>Export</title>

        <section>
          <title>Export -&gt; Export Image...</title>
          <para>
            Jmol can export images of the following types:
            <itemizedlist>
              <listitem><para>BMP</para></listitem>
              <listitem><para>GIF</para></listitem>
              <listitem><para>JPG</para></listitem>
              <listitem><para>PNG</para></listitem>
              <listitem><para>PPM</para></listitem>
            </itemizedlist>
          </para>
          <para>
            Note that GIF pictures can only be exported if the
            displayed image is 8 bit.
          </para>
        </section>

        <section>
          <title>Export -&gt; Render in pov-ray...</title>
          <para>
          For high quality images, Jmol interfaces with the POV-Ray ray tracer.
          To use this feature, you must have the <command>povray</command> command
          line utility installed. You can download it from
          <ulink url="http://www.povray.org/">www.povray.org/</ulink>.
          </para>
        </section>
      </section>
      <section>
        <title>Print</title>
        <para> 
          Postscript files can be exported directly to printer and to file.
        </para>
      </section>
      <section>
        <title>Exit</title>
        <para>Quits this Jmol session.</para>
      </section>
    </section>
    <section>
      <title>The Edit menu</title>
      <section>
        <title>Select All</title>
        <para>
          Selects all atoms in the view screen.
        </para>
      </section>
      <section>
        <title>Deselect All</title>
        <para> 
          Deselects all atoms in the view screen.
        </para>
      </section>
      <section>
        <title>Atom Properties...</title>
        <para> 
          This menu opens a dialog in which atomic properties can be added to
          a large number of atom types. These properties include
          the colors used to depict atoms.
        </para>
      </section>
      <section>
        <title>Preferences...</title>
        <para>
          This menu opens a dialog to change settings and make user customized
          preferences. These settings are saved from one session to the next
        </para>
        <section>
          <title>Display Tab</title>
          <para>
            In these frame a few display settings can be changed. By default
            anti-aliasing is turned off. Turning it on improves the images
	    considerably but will also reduce performance.
          </para>
          <para>
	    Note: The 1.3.1 JVM which ships with Macintosh OS X and OS X 10.2
	    (Jaguar) has crash bugs with some pixel interpolation and
	    anti-aliasing operations. Therefore, you may need to disable the
	    use of Java Graphics2D on this platform. 
          </para>
        </section>
        <section>
          <title>Colors Tab</title>
          <para>
            In these frame some general display colors can be changed.
            Like the background color, and the color used to highlight
	    selected atoms.
          </para>
        </section>
      </section>
    </section>
    <section>
      <title>The Display menu</title>
      <para>
        In this menu display settings/styles can be changed.
      </para>
      <section>
        <title>Atom Style</title>
        <section>
          <title>Quick Draw</title>
	  <para>
	    Renders atoms as filled circles.
          </para>
        </section>
        <section>
          <title>Shaded</title>
          <para>
	    Renders atoms as shaded spheres.
          </para>
        </section>
        <section>
          <title>Wire Frame</title>	  
          <para>
	    Renders atoms as circle outlines.
	  </para>
        </section>
	<section>
	  <title>Invisible</title>
	  <para>
	    Atoms are not drawn, but are assumed to have the same radius that
	    they would occupy. So bonds are drawn to the outer circumference
	    of where the atom would be. Compare with *None*
	  </para>
	  <para>
	    This option can be useful when used in conjunction with 
	    atom labels to display atom type.
	  </para>
	</section>
	<section>
	  <title>None</title>
	  <para>
	    Atoms are not drawn and are assumed to have a radius of zero.
	    Bonds are drawn to atom centers. 
	  </para>
	  <para>
	    This option can be very useful when use in conjunction with 
	    atom labels to display atom type.
	  </para>
	</section>
      </section>
      <section>
        <title>Bond Style</title>
        <section>
          <title>Quick Draw</title>	  
	  <para>
	    Renders bonds as filled rectangles.
	  </para>
        </section>
        <section>
          <title>Shaded</title>	  
	  <para>
	    Renders bonds as shaded cylinders.
	  </para>
        </section>
        <section>
          <title>Wire Frame</title>
	  <para>
	    Renders bonds as lines.
	  </para>
        </section>
        <section>
          <title>Boxes</title>
	  <para>
	    Renders bonds as rectangle outlines.
	  </para>
        </section>
        <section>
          <title>None</title>
	  <para>
	    Bonds are not drawn. 
	  </para>
        </section>
      </section>
      <section>
        <title>Atom Labels</title>
        <section>
          <title>None</title>	  
          <para>
            No atom labels is shown.
          </para>
        </section>
        <section>
          <title>Atomic Symbols</title>	  
          <para>
            Atoms are labeled with their atomic symbol.
          </para>
        </section>
        <section>
          <title>Atom Types</title>
          <para>
            Atoms are labeled with their atom type.
	    (What is the difference between Atom Type and Atom Symbol?)
          </para>
        </section>
        <section>
          <title>Atom Numbers</title>
	  <para>
	    Atoms are labeled with index numbers.
	  </para>
        </section>
      </section>
      <section>
	<title>Atom Coloring</title>
	<section>
	  <title>Atom Type</title>
	  <para>
	    Atoms are colored based upon their type. Default colors are
	    generally CPK colors
	  </para>
	</section>
	<section>
	  <title>Atomic Charge</title>
	  <para>
	    Atoms are colored based upon atomic charge. (Need more
	    explanation here!)
	  </para>
	</section>
      </section>
      <section>
        <title>Wireframe Rotation</title>
	<para>
	  This option may be checked if performance is unacceptable when
	  manipulating large molecules. 
	  When this option is checked, wireframe rendering is used for
	  displayed atoms and bonds during rotations, translations, and
	  zoom operations. The molecule is rendered according to the current
	  settings when the mouse is released.
	</para>
      </section>
      <section>
	<title>Perspective Depth</title>
	<para>
	  This option controls rendering with perspective depth. When this
	  option is unchecked molecules are rendered as a flat projection
	  onto the screen. When checked, sizes and distances are adjusted
	  for a camara perspective.
	</para>
	<para>
	  For a good example of this take a look at some of the crystal
	  structures, such as <filename>samples/CdSe_nanocrystal.xyz</filename>
	  or <filename>samples/HfO2_on_Si_relax.in</filename>
	</para>
	<para>
	  Alternatively, turn on the bounding box (see below).
	</para>
      </section>
      <section>
	<title>Axes</title>
	<para>
	  Displays cartesian axes with the origin at the center of the
	  bounding box defined by the extreme coordinates of the molecule.
	</para>
	<para>
	  Note that the positive Y axis is at the top, unlike RasMol.
	</para>
      </section>
      <section>
	<title>Bounding Box</title>
	<para>
	  Displays the bounding box, defined by the extreme coordinates
	  of the centers of the atoms in each of the three dimensions.
	</para>
      </section>
      <section>
        <title>Hydrogens</title>
        <para> 
          Turns on/off the display of hydrogen atoms.
        </para>
      </section>
      <section>
        <title>Vectors</title>
        <para>
	  Controls the display of vibrational vectors as dipole moments.
	</para>
      </section>
      <section>
        <title>Measurements</title>
        <para>
	  Controls the display of distance, angle, and dihedral torsion
	  measurements. 
	</para>
      </section>
    </section>
    <section>
      <title>The View menu</title>
      <section>
	<title>Front/Top/Bottom/Right/Left</title>
	<para>
	  Self explanatory. Useful with crystal structures. 
	</para>
      </section>
      <section>
        <title>Transform</title>
	<para>
	  Applies an AxisAngle rotation about user-specified coordinates.
	</para>
      </section>
      <section>
        <title>Define center</title>
	<para>
	  Defines the center of rotation for the molecule to be the
	  geometric center of the selected molecules.
	</para>
	<para>
	  If no atoms are selected the the center is reset to the center
	  of the bounding box defined by the extreme atom centerpoints
	  in each of the x, y, and z dimensions. This is the default.
	</para>
	<para>
	  If one atom is selected then it becomes the center of rotation.
	</para>
	<para>
	  If two or more atoms are selected then the center becomes the point
	  defined by the mean of the x, y, and z coordinates.
	</para>
	<para>
	  {If you think there is a better definition for this
	  (center of gravity? center of the bounding box?)
	  then let us know and we can either change this or add a
	  new definition.}
	</para>
      </section>
    </section>
    <section>
      <title>The Measure menu</title>
      <section>
        <title>Distance...</title>
	<para>
	  Allows you to choose two atoms and display the distance between them.
	</para>
      </section>
      <section>
        <title>Angle...</title>
	<para>
	  Allows you to choose three atoms and display the angle formed about
	  the center atom.
	</para>
      </section>
      <section>
        <title>Dihedral...</title>
	<para>
	  Allows you to choose four atoms and display the Dihedral/Torsion
	  angle between the two planes defined by atoms 1,2,3 and atoms 2,3,4.
	</para>
      </section>
      <section>
	<title>Delete Distance/Angle/Dihedral</title>
	<para>
	  Allows you to delete one or more distance/angle/dihedral
	  measurements.
	</para>
      </section>
      <section>
	<title>Clear all Distances/Angles/Dihedrals</title>
	<para>
	  Self explanatory.
	</para>
      </section>
      <section>
        <title>Clear all Measurements...</title>
	<para>
	  Self explanatory.
	</para>
      </section>
      <section>
        <title>View Measurement List...</title>
	<para>
	  Displays a hierarchical list of all defined measurements.
	</para>
      </section>
    </section>
    <section>
      <title>The Extras menu</title>
      <section>
        <title>Animate...</title>
	<para>
	  Some file formats support multiple frames. A file containing more
	  than one frame is considered an animation. This menu item brings
	  up the animation dialog box which allows you to control the
	  animation playback. 
	</para>
      </section>
      <section>
        <title>Vibrate...</title>
	<para>
	  If the molecular model contains frequency information, the
	  vibrational modes can be animated and controlled with the
	  vibrate dialog box. 
	</para>
	<para>
	  Note that Display->Vectors should be checked in order to render
	  vibrational vectors. 
	</para>
	<para>
	  Good examples are <filename>samples/phenylnitrene.g92.out</filename>
	  and <filename>samples/ammonia.adf.out</filename>
	</para>
      </section>
      <section>
        <title>Graph...</title>
        <para>This opens a window in which a energy versus frames plot
          is viewed. This option currently only works when reading a
          CML animation with energies given for each frame.</para>
        <para>An example file is supplied: conformeren.cml.</para>
      </section>
      <section>
        <title>Crystal Properties...</title>
        <para>
	  Opens the crystal properties dialog box. 
	</para>
      </section>
    </section>
    <section>
      <title>The Help menu</title>
      <section>
        <title>About Jmol</title>
        <para>Popups a window with copyright notice for this software.</para>
      </section>
      <section>
        <title>User Guide</title>
	<para>Shows this documentation.</para>
      </section>
      <section>
        <title>What's New</title>
        <para>Shows the changes from version to version.</para>
      </section>
      <section>
        <title>Jmol Console</title>
        <para>
	  Shows the output to the System.out and System.err output streams.
	</para>
      </section>
    </section>
  </chapter>

  <chapter id="rasmol" xreflabel="RasMol/Chime Scripts">
    <title id="rasmol.title">RasMol/Chime Scripts</title>
    <para>
      Note: The scripting engine has been completely rewritten for Jmol Release
      6. As of this writing it should be considered *alpha test* code. Please
      supply feedback in case of bugs and/or unexpected behavior. 
    </para>
    <para>
      Jmol supports the majority of RasMol/Chime scripting commands. 
    </para>
    <section>
      <title>background &lt;color&gt;</title>
      <para>
	Sets color of the background. See Color Specification.
      </para>
    </section>
    <section>
      <title>center {&lt;expression&gt;}</title>
      <para>
	Sets the center of rotation to be the center of the set of atoms
	defined by the expression. If no atoms are selected then the center
	is set to the center of the bounding box (the default).
      </para>
    </section>
    <section>
      <title>Color {&lt;object&gt;} &lt;color&gt;</title>
      <para>
	Colors the object with the specified color. If no object is given
	then atom is assumed. Currently supported objects are atoms, bonds,
	labels and axes.
      </para>
    </section>
    <section>
      <title>cpk &lt;boolean&gt; | cpk &lt;value&gt;</title>
      <para>
	Renders selected atoms as spheres.
      </para>
      <para>
	A boolean value renders the
	spheres with the vanderWaals radius. The current jmol implementation
	does a poor job of rendering these because the renderer does not
	handle intersecting objects. 
      </para>
      <para>
	A decimal value specifies sphere radius in Angstroms.
      </para>
      <para>
	A positive integer specifies sphere radius in RasMol units,
	1/250th of an Angstrom.
      </para>
      <para>
	A negative integer specifies sphere radius as a percentage of
	the vanderWaals radius. Thus, a value of -25 specifies that the
	selected atoms should be rendered with a sphere radius of 25%
	of the vanderWaals radius for that element.
      </para>
      <para>
	cpk is synonymous with spacefill.
      </para>
    </section>
    <section>
      <title>define &lt;variable&gt; &lt;expression&gt;</title>
      <para>
	defines the specified variable to the the atoms selected by
	the expression;
      </para>
    </section>
    <section>
      <title>echo &lt;string&gt;</title>
      <para>
	Prints the specified string to the console. (We need to find a
	better place to send the output. Status line?)
      </para>
    </section>
    <section>
      <title>exit</title>
      <para>
	Stops script execution.
      </para>
    </section>
    <section>
      <title>label &lt;boolean&gt; | label &lt;string&gt;</title>
      <para>
	Allows you to specify a label to be shown with the selected atoms.
	%a  Atom Name
	%b %t Protein B-Factor/Temperature
	%c %s Protein chain
	%e Element atomic symbol
	%i Atom serial number
	%m single letter amino acid code
	%n 3 letter residue name
	%r PDB residue number
      </para>
    </section>
    <section>
      <title>load {&lt;format&gt;} &lt;filename | url&gt;</title>
      <para>
	The format parameter is ignored. It is allowed for backward
	compatibility with RasMol/Chime.
      </para>
    </section>
    <section>
      <title>monitor &lt;number&gt; &lt;number&gt; {&lt;number&gt;} {&lt;number&gt;}</title>
      <para>
	Renders a measurement between the specified atoms.
      </para>
      <para>
	Two atoms specify a distance measurement.
      </para>
      <para>
	Three atoms specify an angle measurement.
      </para>
      <para>
	Four atoms specify a dihedral angle measurement.
      </para>
    </section>
    <section>
      <title>refresh</title>
      <para>
	Forces screen repaint during script execution. (Not sure under
	what circumstances this would be necessary?)
      </para>
    </section>
    <section>
      <title>reset</title>
      <para>
	Resets molecule to its original position: zoom 100; center; 
	translate x 0; translate y 0;
      </para>
    </section>
    <section>
      <title>restrict &lt;expression&gt;</title>
      <para>
	Selects the atoms identified by expression and hides all atoms
	and bonds which are outside the selection set.
      </para>
    </section>
    <section>
      <title>rotate &lt;axis&gt; &lt;value&gt;</title>
      <para>
	Rotates the model the specified angle about the specified axis.
	Integer values specify degrees. Decimal values specify radians.
      </para>
    </section>
    <section>
      <title>script &lt;filename | url&gt;</title>
      <para>
	Loads and executes the specified script file/url.
      </para>
    </section>
    <section>
      <title>Atom Expressions</title>
      <para> </para>
    </section>
    <section>
      <title>Predefined Sets</title>
      <para> </para>
    </section>
    <section>
      <title>Rendering Commands</title>
      <section>
        <title>set shadows</title>
        <para>
	  <cmdsynopsis>
	    <command>set shadows</command>
            <group> 
	      <arg>true</arg>
	      <arg>false</arg>
	    </group>
	  </cmdsynopsis>
	</para>
        <para>
	  Turns on shading when rendering.
	</para>
      </section>
    </section>
    <section>
      <title>Export Commands</title>
      <para> </para>
    </section>
    <section>
      <title>Misc. Commands</title>
      <para> </para>
    </section>
    <section>
      <title>Colour Schemes</title>
      <para> </para>
    </section>
    <section>
      <title>Parameters</title>
      <section>
        <title>shadows</title>
        <para>
	  <cmdsynopsis>
	    <command>set shadows</command>
            <group> 
	      <arg>true</arg>
	      <arg>false</arg>
	    </group>
	  </cmdsynopsis>
	</para>
        <para>
	  Turns on shading when rendering.
	</para>
      </section>
      <section>
        <title>autorefresh</title>
        <para>
	  <cmdsynopsis>
	    <command>set refresh</command>
            <group> 
	      <arg>true</arg>
	      <arg>false</arg>
	    </group>
	  </cmdsynopsis>
	</para>
        <para>
	  Does a scripted refresh after every command. Slows
	  down the process a bit, but can be handy when entering
	  commands manually.
	</para>
      </section>
    </section>	
  </chapter>

</book>
