<project default="doc" basedir=".">

  <property name="version" value="7" />
  <property name="applet-version" value="7" />
  <property name="doc.dir" value="source/doc" />
  <property name="build.dir" value="build" />
  <property name="build.doc" value="${build.dir}/doc" />

  <target name="clean">
    <delete dir="${build.dir}"/>
  </target>

  <target name="spotless" depends="clean">
  </target>

  <target name="doc" >
    <mkdir    dir="${doc.dir}/images"/>
    <mkdir    dir="${build.doc}"/>
    <style basedir="${doc.dir}"
      destdir="${build.doc}"
      style="${doc.dir}/style.xsl"
      includes="**/*.xml"
      excludes="project.xml"
    />
    <copy todir="${build.doc}" overwrite="yes"> 
      <fileset dir="${doc.dir}" includes="license.txt,document.dtd"/>
    </copy>
    <copy todir="${build.doc}/images" overwrite="yes">
      <fileset dir="${doc.dir}/images"/>
    </copy>
    <copy todir="${build.doc}" overwrite="yes">
      <fileset dir="${doc.dir}" includes="*.css,*.xyz,*.cml,*.mol,*.spt,*.in"/>
      <fileset dir="../Jmol" includes="JmolApplet.jar" />
      <fileset dir="../Jmol/appletweb" includes="JmolApplet.properties" />
    </copy>

    <replace file="${build.doc}/index.html" token="$$VERSION$$" value="${version}"/>
    <replace file="${build.doc}/download.html" token="$$VERSION$$" value="${version}"/>
    <replace file="${build.doc}/applet.html" token="$$APPLET-VERSION$$" value="${applet-version}"/>
  </target>
</project>

