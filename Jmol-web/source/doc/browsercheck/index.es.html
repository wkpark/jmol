<!--
/* $RCSfile$
 * $Author$
 * $Date$
 * $Revision$
 * A few changes by aHerraez 1-4 oct. 2008: 
 *		- fix: no message was being shown for compatible browsers
 *		- more user-friendly browser name and OS name displayed
 *
 * Copyright (C) 2004-2008  The Jmol Development Team
 *
 * Contact: jmol-developers@lists.sf.net
 *
 *  This library is free software; you can redistribute it and/or
 *  modify it under the terms of the GNU Lesser General Public
 *  License as published by the Free Software Foundation; either
 *  version 2.1 of the License, or (at your option) any later version.
 *
 *  This library is distributed in the hope that it will be useful,
 *  but WITHOUT ANY WARRANTY; without even the implied warranty of
 *  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
 *  Lesser General Public License for more details.
 *
 *  You should have received a copy of the GNU Lesser General Public
 *  License along with this library; if not, write to the Free Software
 *  Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA
 *  02111-1307  USA.
 */
-->
<!--
  Spanish translation 
  Translated from default version : index.en.html (v 1.1
-->
<html>
  <head>
    <title>Verificación del navegador para Jmol</title>
    <script src="../jmol/Jmol.js"></script>
    <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
  </head>
  <body>
    <img src="../images/Jmol_smallLogo.jpg" />
    <hr />
    <h1>Verificación del navegador para Jmol</h1>
    <h2>Información de base:</h2>
    <blockquote>
    <p>
      La miniaplicación Jmol requiere un navegador web compatible con miniaplicaciones Java (<i>applets</i>).
    </p>
    <p>
      Además, la mayoría de páginas web que usan la miniaplicación Jmol 
      incluyen controles HTML (botones, casillas de selección, etc.)
      que envían instrucciones de control a Jmol.
      Para que estos controles funcionen, el navegador web
      debe también reconocer JavaScript y la comunicación LiveConnect 
      entre JavaScript y Java.
    </p>
    </blockquote>

    <h2>
      Resultados obtenidos con tu navegador:
    </h2>
  <script type="text/javascript">
      var msgNetscape47Win = 
      "<p>Aunque en general Jmol es compatible con  Netscape 4.7 en Windows, hay <b>algunos " +
      "pequeños problemas</b> relativos a eventos del ratón y ocasionalmente " +
      "a JavaScript/LiveConnect. </p>" +
      "<p>Además, el estado de la miniaplicación no se reinicia cuando " +
      "se recarga la página web, lo cual en ocasiones hace que las casillas de selección " +
      "y botones de opción queden desincronizados con el aspecto de la miniaplicación. </p>" +
      "<p><b>Recomendamos</b> que consideres la posibilidad de actualizar " +
      "a un navegador más moderno. </p>";

      var msgNoGetElementById =
      "<p>Aparentemente, este navegador no es compatible " +
      "con los estándares de los navegadores modernos. Probablemente, Jmol o los botones que lo controlan " +
      "<b>no funcionen</b> adecuadamente en este navegador. Se <b>recomienda</b> " +
      "que actualices el navegador. </p>";

      var msgGenericNoJava =
      "<p>El naveagdor web informa de que Java no está activado. " +
      "La miniaplicación Jmol <b>requiere</b> apoyo de Java desde el navegador.<br />" +
      "Por favor, <b>configura</b> el navegador para que active Java o <b>descarga</b> Java desde " +
      "<a href='http://www.java.com' target='_blank'>www.java.com " +
      "<img border='0' src='get_java_red_button.gif' /></a>." +
      "</p>";

      var msgGenericOK =
      "<p>El navegador parece <b>compatible</b> con Jmol. </p>" +
      "<p>Si encuentras problemas, por favor informa de ellos a " +
      "<code>jmol-developers@lists.sf.net</code></p>";

      var msgNoLiveConnectMac =
      "<p>La miniaplicación Jmol <b>funcionará</b> adecuadamente. " +
      "Sin embargo, las páginas web que contengan controls HTML tales como " +
      "botones, casillas de selección y enlaces <b>no funcionarán</b> adecuadamente porque " +
      "los controles no pueden enviar las instrucciones a Jmol.</p>" +
      "<p><b>Se recomienda</b> que consideres la posibilidadv de utilizar Safari u otro " +
      "navegador Macintosh que admita la comunicación LiveConnect entre " +
      "JavaScript y Java.</p>";

      var msgMacIE =
      "<p>Microsoft Internet Explorer en Macintosh <b>no admite</b> " +
      "la comunicación LiveConnect entre JavaScript y Java. </p>";

      var msgMacOldSafari =
      "<p>Las versiones antiguas de Safari <b>no admiten</b> " +
      "la comunicación LiveConnect entre JavaScript y Java. </p>";

      var msgMacMozillaOldJava =
      "<p>Netscape/Mozilla/FireFox en Macintosh no tiene acceso a " +
      "la última versión de Java y por ello <b>no es compatible</b> con " +
      "la comunicación LiveConnect entre JavaScript y Java. </p>";

      var msgMacMozillaAlternative =
      "<p>Puedes también <b>intentar</b> instalar el conector Java "+
      "Plug-in para Macintosh OS X desde" +
      "<a href='http://javaplugin.sourceforge.net' target='_blank'>" +
      "javaplugin.sourceforge.net</a>";

      var msgMacOpera754OrLess =
      "<p>Esta versión de Opera en Macintosh aparentemente tiene <b>problemas</b> " +
      "para ejecutar miniaplicaciones. </p>" +
      "<b>Se recomienda</b> que cosideres la posibilidad de emplear Safari u otro " +
      "navegador Macintosh que ejecute con garantías las miniaplicaciones Java y admita " +
      "la comunicación LiveConnect entre JavaScript y Java. </p>";

      var msgLinuxKonqueror331OrLess =
      "<p>Todas las versiones de Konqueror bajo Linux/Unix hasta la 3.3.1 tienen " +
      "<b>anomalías</b> en la compatibilidad con Java. " +
      "El equipo de Jmol ha enviado informes de fallo al equipo Konqueror y " +
      "éste los está considerando.</p>" +
      "<p>Es posible que en una versión de Konqueror posterior a la 3.3.1 " +
      "se haya solucionado el problema. Alternativamente, " +
      "puedes utilizar un navegador de la familia Mozilla.</p>";

      var msgOK =
      "<p>El navegador parece ser <b>compatible</b> con Jmol.</p>" +
      "<p>Si encuentras problemas con Jmol en este navegador, " +
      "por favor informa de ellos a " +
      "<code>jmol-developers@lists.sf.net</code></p>";

      var msg = "";
      var mozillaVersion = "";
      var javaVersion = 0;
      var state = "yellow";

      with (_jmol) {
        if (browser == "mozilla" && browserVersion >= 5) {
          var indexRV = ua.indexOf("rv:");
	  if (indexRV > 0) {
	    var rv = ua.substring(indexRV + 3);
	    var indexEnd = rv.indexOf(")");
	    var indexSemi = rv.indexOf(";");
	    if (indexEnd < 0 || (indexSemi > 0 && indexSemi < indexEnd))
	      indexEnd = indexSemi;
            if (indexEnd > 0)
	      mozillaVersion = " " + rv.substring(0, indexEnd);
	  }
        }
        do {
	  if (isNetscape47Win)
	    { msg = msgNetscape47Win; break; }
	  if (os == "mac" && browser == "mozilla" && browserVersion >= 5) {
	    eval("try{javaVersion=" +
	         "java.lang.System.getProperty('java.version');" +
                 "} catch (e) { }");
	    if (javaVersion < 1.4) {
	      msg = msgMacMozillaOldJava + msgNoLiveConnectMac +
	            msgMacMozillaAlternative;
              break;
	    }
	  }
	  if (! isJavaEnabled)
	    { msg = msgGenericNoJava; state = "red"; break; }
	  if (! hasGetElementById)
	    { msg = msgNoGetElementById; state = "red"; break; }
          if (os == "mac" && browser == "msie")
	    { msg = msgMacIE + msgNoLiveConnectMac; break; }
	  if (os == "mac" && browser == "safari" && browserVersion < 125.1)
	    { msg = msgMacOldSafari + msgNoLiveConnectMac; break; }
	  if (os == "mac" && browser == "opera" && browserVersion <= 7.54)
	    { msg = msgMacOpera754OrLess; state = "red"; break; }
	  if ((os == "win" && browser == "msie") ||
	      (os == "win" && browser == "mozilla" && browserVersion >= 5) ||
	      (os == "win" && browser == "opera" && browserVersion >= 7.54) ||
	      ((os == "linux" || os == "unix") &&
	       browser == "mozilla" && browserVersion >= 5))
	    { state = "green"; break; }
	  if ((os == "linux" || os == "unix") &&
	      browser == "konqueror" && browserVersion <= 3.3)
	    { msg = msgLinuxKonqueror331OrLess; state = "red"; break; }
        } while (false); // this 'loop' is here only to allow use of 'break'

	    var osString = os;	/* for a more meaningful display */
		if (osString=="win") { osString = "Windows" }
		else if (osString=="linux") { osString = "Linux" }
		else if (osString=="unix") { osString = "Unix" }
		else if (osString=="mac") { osString = "MacOS" }

		var browserString;
		var Ffox = navigator.userAgent.indexOf("Firefox");
		if ( browser=="mozilla")
		{	/* Mozillas are always Mozilla/5; the browserVersion=5 is hence irrelevant as version nr. 
				All details are shown in UA anyway, so I'll put here the most user-friendly string */
			if (Ffox!=-1)
			{	browser = "Firefox";
				browserVersion = navigator.userAgent.substring(Ffox + "Firefox/".length);
				browserString = browser + " " + browserVersion;
			}
			else
			{	browserVersion = mozillaVersion;
				browserString = browser + " " + browserVersion;
			}
		}
		else if ( browser=="msie")
		{	browser = "Internet Explorer";
			browserString = browser + " " + browserVersion;
		}
		else 
		{	browserString = browser + " " + browserVersion + mozillaVersion; /* default */
		}

        document.writeln("<p><big>Tu navegador web es, aparentemente, " +
             "<i>" + browserString + "</i>" +
			 " sobre <i>" + osString + "</i></big></p>");
        document.writeln("<table border='0'>" +
             "<tr><td bgcolor='" + state + "'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;" +
			 "</td><td>");
        if (msg == "") msg = msgOK;
		document.writeln(msg);
        document.writeln("</td></tr></table>");
      }
    </script>
    
    <p>
      <b>Detalles:</b>
    </p>
    <table border="1" cellpadding="5" cellspacing="0">
      <tr>
	<td>Sistema operativo</td>
	<td>
	  <script type="text/javascript">
	    document.write(osString);
	  </script>
	</td>
      </tr>
      <tr>
	<td>
	  Navegador web
	</td>
	<td>
	  <script type="text/javascript">
	    document.write(_jmol.browser);
	  </script>
	</td>
      </tr>
      <tr>
	<td>
	  Versión del navegador
	</td>
	<td>
	  <script type="text/javascript">
	    document.write(_jmol.browserVersion);
	  </script>
	</td>
      </tr>
      <tr>
	<td>
	  navigator.userAgent
	</td>
	<td>
	  <script type="text/javascript">
	    document.write(navigator.userAgent);
	  </script>
	</td>
      </tr>
      <tr>
	<td>
	  tiene getElementById()
	</td>
	<td>
	  <script type="text/javascript">
	    document.write(!!document.getElementById);
	  </script>
	</td>
      </tr>
      <tr>
	<td>
	  navigator.javaEnabled()
	</td>
	<td>
	  <script type="text/javascript">
	    document.write(navigator.javaEnabled());
	  </script>
	</td>
      </tr>
    </table>
    <br />
  </body>
</html>
