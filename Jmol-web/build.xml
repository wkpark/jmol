<project default="html" basedir=".">

  <property name="version" value="8" />
  <property name="applet-version" value="8" />
  <property name="doc.dir" value="source/doc" />
  <property name="build.dir" value="build" />
  <property name="build.html" value="${build.dir}/html" />

  <target name="clean">
    <delete dir="${build.dir}"/>
  </target>

  <target name="spotless" depends="clean">
  </target>

  <target name="html" depends="clean" >
    <mkdir    dir="${doc.dir}/images"/>
    <mkdir    dir="${build.html}"/>
    <style basedir="${doc.dir}"
      destdir="${build.html}"
      style="${doc.dir}/style.xsl"
      includes="**/*.xml"
      excludes="project.xml"
    />
    <copy todir="${build.html}" overwrite="yes"> 
      <fileset dir="${doc.dir}" includes="license.txt,document.dtd"/>
    </copy>
    <copy todir="${build.html}/images" overwrite="yes">
      <fileset dir="${doc.dir}/images"/>
    </copy>
    <copy todir="${build.html}" overwrite="yes">
      <fileset dir="${doc.dir}" includes="*.css,*.xyz,*.cml,*.mol,*.spt,*.in"/>
      <fileset dir="../Jmol" includes="JmolApplet.jar" />
      <fileset dir="../Jmol/appletweb" includes="JmolApplet.properties" />
    </copy>
    <copy todir="${build.html}/documentation" overwrite="yes">
      <fileset dir="../Jmol/build/doc" includes="**/*" />
    </copy>

    <replace file="${build.html}/index.html"
             token="$$VERSION$$" value="${version}"/>
    <replace file="${build.html}/download.html"
             token="$$VERSION$$" value="${version}"/>
    <replace file="${build.html}/applet.html"
             token="$$APPLET-VERSION$$" value="${applet-version}"/>
  </target>
</project>

